# GetX 라우팅 기초

## 라우팅이란?

라우팅은 앱에서 화면 간 이동을 관리하는 방법입니다. GetX는 매우 간단하고 직관적인 라우팅 시스템을 제공합니다.

## GetX 라우팅의 장점

1. **간단한 문법**: `Get.to()`, `Get.off()` 등 직관적인 메서드
2. **두 가지 라우팅 방식**: 기본 라우팅과 명명된 라우트 지원
3. **중간 페이지 제거**: 불필요한 페이지 스택 관리
4. **파라미터 전달**: 간단한 데이터 전달
5. **애니메이션**: 기본 애니메이션 제공

## 1. 기본 라우팅 (Direct Routing)

### 기본 라우팅의 특징

- **설정 불필요**: main.dart에서 별도 설정 없이 바로 사용
- **타입 안전성**: 컴파일 타임에 페이지 존재 확인
- **IDE 지원**: 자동완성, 리팩토링 지원
- **직관적 사용**: 페이지 위젯을 직접 전달

### 기본 라우팅 메서드

#### 1. Get.to() - 새 페이지로 이동

```dart
// 기본 이동
Get.to(() => SecondPage());

// 파라미터와 함께 이동
Get.to(() => SecondPage(), arguments: {'name': '홍길동', 'age': 25});

// 복잡한 데이터와 함께 이동
Get.to(() => UserDetailPage(), arguments: {
  'user': User(id: 1, name: '김철수', email: 'kim@example.com'),
  'showEditButton': true,
  'previousPage': 'home',
});

// 애니메이션과 함께 이동
Get.to(
  () => SecondPage(),
  transition: Transition.rightToLeft,
  duration: Duration(milliseconds: 300),
);

// arguments와 애니메이션 함께 사용
Get.to(
  () => ProfilePage(),
  arguments: {'userId': 123, 'userName': '홍길동'},
  transition: Transition.fadeIn,
  duration: Duration(milliseconds: 500),
);
```

#### 2. Get.off() - 현재 페이지를 새 페이지로 교체

```dart
// 현재 페이지를 새 페이지로 교체
Get.off(() => SecondPage());

// 모든 페이지를 지우고 새 페이지로 이동
Get.offAll(() => HomePage());
```

#### 3. Get.back() - 이전 페이지로 돌아가기

```dart
// 이전 페이지로 돌아가기
Get.back();

// 결과와 함께 돌아가기
Get.back(result: '데이터');
```

#### 4. Get.until() - 특정 페이지까지 돌아가기

```dart
// 특정 페이지까지 모든 페이지 제거
Get.until((route) => route.settings.name == '/home');
```

### 기본 라우팅에서 arguments 전달 및 받기

#### 데이터 전달

```dart
// 기본 라우팅으로 arguments 전달
Get.to(() => SecondPage(), arguments: {
  'name': '홍길동',
  'age': 25,
  'email': 'hong@example.com',
  'isActive': true,
});

// 복잡한 객체 전달
Get.to(() => UserDetailPage(), arguments: {
  'user': User(id: 1, name: '김철수', email: 'kim@example.com'),
  'showEditButton': true,
});
```

#### 데이터 받기

```dart
class SecondPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    // arguments 받기
    final arguments = Get.arguments as Map<String, dynamic>;

    // 개별 값 추출
    final name = arguments['name'] as String? ?? '이름 없음';
    final age = arguments['age'] as int? ?? 0;
    final email = arguments['email'] as String? ?? '';
    final isActive = arguments['isActive'] as bool? ?? false;

    return Scaffold(
      appBar: AppBar(title: Text('두 번째 페이지')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text('이름: $name'),
            Text('나이: $age'),
            Text('이메일: $email'),
            Text('활성 상태: ${isActive ? "활성" : "비활성"}'),

            SizedBox(height: 20),

            ElevatedButton(
              onPressed: () {
                // 결과와 함께 이전 페이지로 돌아가기
                Get.back(result: '수정된 데이터');
              },
              child: Text('돌아가기'),
            ),
          ],
        ),
      ),
    );
  }
}
```

### 기본 라우팅의 장단점

#### ✅ 장점

- **설정 불필요**: main.dart에서 별도 설정 없이 바로 사용
- **타입 안전성**: 컴파일 타임에 페이지 존재 확인
- **IDE 지원**: 자동완성, 리팩토링 지원
- **직관적 사용**: 페이지 위젯을 직접 전달
- **빠른 개발**: 즉시 페이지 이동 가능

#### ❌ 단점

- **중앙 관리 부족**: 라우트가 흩어져 있음
- **애니메이션 설정 어려움**: 각 페이지별로 개별 설정 필요
- **미들웨어 적용 어려움**: 전역 인증 체크 등 복잡
- **딥링크 지원 어려움**: 외부에서 특정 페이지로 직접 접근 어려움

## 2. 명명된 라우트 (Named Routing)

### 명명된 라우트의 특징

- **중앙 집중식 관리**: 모든 라우트가 main.dart에서 관리
- **URL 스타일**: 웹과 유사한 URL 구조
- **애니메이션 설정**: 라우트별로 다른 애니메이션 적용 가능
- **미들웨어**: 라우트별 인증, 권한 체크 등 적용 가능
- **딥링크**: 외부에서 특정 페이지로 직접 접근 가능

### 명명된 라우트 설정

#### 1. main.dart에서 라우트 정의

```dart
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return GetMaterialApp(
      title: 'GetX 라우팅',
      initialRoute: '/',
      getPages: [
        GetPage(
          name: '/',
          page: () => HomePage(),
        ),
        GetPage(
          name: '/second',
          page: () => SecondPage(),
        ),
        GetPage(
          name: '/profile',
          page: () => ProfilePage(),
          transition: Transition.fadeIn,
          transitionDuration: Duration(milliseconds: 300),
        ),
        GetPage(
          name: '/settings',
          page: () => SettingsPage(),
          transition: Transition.zoom,
          middlewares: [AuthMiddleware()],
        ),
        GetPage(
          name: '/user/:id',
          page: () => UserDetailPage(),
          transition: Transition.rightToLeft,
        ),
      ],
    );
  }
}
```

### 명명된 라우트 메서드

#### 1. Get.toNamed() - 명명된 라우트로 이동

```dart
// 기본 이동
Get.toNamed('/second');

// 파라미터와 함께 이동
Get.toNamed('/profile', arguments: {'userId': 123});

// 애니메이션과 함께 이동
Get.toNamed(
  '/profile',
  arguments: {'userId': 123},
  transition: Transition.fadeIn,
  duration: Duration(milliseconds: 500),
);
```

#### 2. Get.offNamed() - 현재 페이지를 명명된 라우트로 교체

```dart
// 현재 페이지를 새 페이지로 교체
Get.offNamed('/home');

// 모든 페이지를 지우고 새 페이지로 이동
Get.offAllNamed('/login');
```

#### 3. Get.until() - 특정 라우트까지 돌아가기

```dart
// 특정 라우트까지 모든 페이지 제거
Get.until((route) => route.settings.name == '/home');
```

### 명명된 라우트에서 arguments 전달 및 받기

#### 데이터 전달

```dart
// 명명된 라우트로 arguments 전달
Get.toNamed('/profile', arguments: {
  'userId': 123,
  'userName': '홍길동',
  'userEmail': 'hong@example.com',
});

// 복잡한 객체 전달
Get.toNamed('/user-detail', arguments: {
  'user': User(id: 1, name: '김철수', email: 'kim@example.com'),
  'showEditButton': true,
  'previousPage': 'home',
});
```

#### 데이터 받기

```dart
class ProfilePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final arguments = Get.arguments as Map<String, dynamic>;
    final userId = arguments['userId'];
    final userName = arguments['userName'];
    final userEmail = arguments['userEmail'];

    return Scaffold(
      appBar: AppBar(title: Text('프로필')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text('사용자 ID: $userId'),
            Text('이름: $userName'),
            Text('이메일: $userEmail'),
          ],
        ),
      ),
    );
  }
}
```

### URL 파라미터 사용

#### 라우트 정의 (URL 파라미터 포함)

```dart
GetPage(
  name: '/user/:id',
  page: () => UserDetailPage(),
),
```

#### URL 파라미터 받기

```dart
class UserDetailPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    // URL 파라미터 받기
    final userId = Get.parameters['id'];

    // arguments 받기
    final arguments = Get.arguments as Map<String, dynamic>? ?? {};
    final userName = arguments['userName'] as String? ?? '';

    return Scaffold(
      appBar: AppBar(title: Text('사용자 상세')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text('사용자 ID: $userId'),
            Text('이름: $userName'),
          ],
        ),
      ),
    );
  }
}
```

#### URL 파라미터와 함께 이동

```dart
// URL 파라미터와 arguments 함께 전달
Get.toNamed('/user/123', arguments: {
  'userName': '홍길동',
  'userEmail': 'hong@example.com',
});
```

### 명명된 라우트의 장단점

#### ✅ 장점

- **중앙 집중식 관리**: 모든 라우트가 한 곳에서 관리
- **애니메이션 설정**: 라우트별로 다른 애니메이션 적용
- **미들웨어**: 라우트별 인증, 권한 체크 등 적용 가능
- **URL 스타일**: 웹과 유사한 구조
- **딥링크**: 외부에서 특정 페이지로 직접 접근 가능
- **라우트 그룹화**: 기능별로 라우트 그룹화 가능

#### ❌ 단점

- **설정 필요**: 모든 라우트를 미리 정의해야 함
- **보일러플레이트**: 많은 라우트가 있을 때 코드가 길어짐
- **타입 안전성 부족**: 문자열로 라우트 이름 사용
- **리팩토링 어려움**: 라우트 이름 변경 시 모든 사용처 수정 필요

## 파라미터 전달 및 받기

### 1. 기본 라우팅에서 arguments 전달 및 받기

#### 데이터 전달

```dart
// 기본 라우팅으로 arguments 전달
Get.to(() => SecondPage(), arguments: {
  'name': '홍길동',
  'age': 25,
  'email': 'hong@example.com',
  'isActive': true,
});

// 복잡한 객체 전달
Get.to(() => UserDetailPage(), arguments: {
  'user': User(id: 1, name: '김철수', email: 'kim@example.com'),
  'showEditButton': true,
});
```

#### 데이터 받기

```dart
class SecondPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    // arguments 받기
    final arguments = Get.arguments as Map<String, dynamic>;

    // 개별 값 추출
    final name = arguments['name'] as String? ?? '이름 없음';
    final age = arguments['age'] as int? ?? 0;
    final email = arguments['email'] as String? ?? '';
    final isActive = arguments['isActive'] as bool? ?? false;

    return Scaffold(
      appBar: AppBar(title: Text('두 번째 페이지')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text('이름: $name'),
            Text('나이: $age'),
            Text('이메일: $email'),
            Text('활성 상태: ${isActive ? "활성" : "비활성"}'),

            SizedBox(height: 20),

            ElevatedButton(
              onPressed: () {
                // 결과와 함께 이전 페이지로 돌아가기
                Get.back(result: '수정된 데이터');
              },
              child: Text('돌아가기'),
            ),
          ],
        ),
      ),
    );
  }
}
```

#### 복잡한 객체 받기

````dart
class UserDetailPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final arguments = Get.arguments as Map<String, dynamic>;

    // User 객체 받기
    final user = arguments['user'] as User;
    final showEditButton = arguments['showEditButton'] as bool? ?? false;

    return Scaffold(
      appBar: AppBar(title: Text('사용자 상세')),
      body: Padding(
        padding: EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text('ID: ${user.id}', style: TextStyle(fontSize: 18)),
            Text('이름: ${user.name}', style: TextStyle(fontSize: 18)),
            Text('이메일: ${user.email}', style: TextStyle(fontSize: 18)),

            if (showEditButton) ...[
              SizedBox(height: 20),
              ElevatedButton(
                onPressed: () {
                  // 수정 페이지로 이동
                  Get.to(() => EditUserPage(), arguments: {'user': user});
                },
                child: Text('수정'),
              ),
            ],
          ],
        ),
      ),
    );
  }
}

class User {
  final int id;
  final String name;
  final String email;

  User({required this.id, required this.name, required this.email});
}

### 3. 안전한 arguments 처리

#### 타입 안전성을 위한 헬퍼 메서드
```dart
class ArgumentsHelper {
  static String getString(Map<String, dynamic> arguments, String key, {String defaultValue = ''}) {
    return arguments[key] as String? ?? defaultValue;
  }

  static int getInt(Map<String, dynamic> arguments, String key, {int defaultValue = 0}) {
    return arguments[key] as int? ?? defaultValue;
  }

  static bool getBool(Map<String, dynamic> arguments, String key, {bool defaultValue = false}) {
    return arguments[key] as bool? ?? defaultValue;
  }

  static T? getObject<T>(Map<String, dynamic> arguments, String key) {
    return arguments[key] as T?;
  }
}

// 사용 예시
class SafeArgumentsPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final arguments = Get.arguments as Map<String, dynamic>? ?? {};

    // 안전한 타입 변환
    final name = ArgumentsHelper.getString(arguments, 'name', defaultValue: '이름 없음');
    final age = ArgumentsHelper.getInt(arguments, 'age', defaultValue: 0);
    final isActive = ArgumentsHelper.getBool(arguments, 'isActive', defaultValue: false);
    final user = ArgumentsHelper.getObject<User>(arguments, 'user');

    return Scaffold(
      appBar: AppBar(title: Text('안전한 Arguments 처리')),
      body: Padding(
        padding: EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text('이름: $name'),
            Text('나이: $age'),
            Text('활성 상태: ${isActive ? "활성" : "비활성"}'),
            if (user != null) ...[
              SizedBox(height: 10),
              Text('사용자 정보:'),
              Text('  ID: ${user.id}'),
              Text('  이름: ${user.name}'),
              Text('  이메일: ${user.email}'),
            ],
          ],
        ),
      ),
    );
  }
}
````

### 4. arguments 사용 시 주의사항

#### ✅ 좋은 예시

```dart
// 명확한 키 이름 사용
Get.to(() => ProfilePage(), arguments: {
  'userId': 123,
  'userName': '홍길동',
  'showEditButton': true,
});

// 받을 때 안전한 처리
final arguments = Get.arguments as Map<String, dynamic>? ?? {};
final userId = arguments['userId'] as int? ?? 0;
final userName = arguments['userName'] as String? ?? '';
final showEditButton = arguments['showEditButton'] as bool? ?? false;
```

#### ❌ 피해야 할 예시

```dart
// 키 이름이 모호함
Get.to(() => ProfilePage(), arguments: {
  'id': 123,  // 어떤 ID인지 불분명
  'name': '홍길동',  // 어떤 이름인지 불분명
});

// 받을 때 안전하지 않은 처리
final arguments = Get.arguments;  // null 체크 없음
final userId = arguments['userId'];  // 타입 캐스팅 없음
```

### 2. 명명된 라우트에서 arguments 전달 및 받기

#### 데이터 전달

```dart
// 명명된 라우트로 arguments 전달
Get.toNamed('/profile', arguments: {
  'userId': 123,
  'userName': '홍길동',
  'userEmail': 'hong@example.com',
});
```

#### 데이터 받기

```dart
class ProfilePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final arguments = Get.arguments as Map<String, dynamic>;
    final userId = arguments['userId'];
    final userName = arguments['userName'];
    final userEmail = arguments['userEmail'];

    return Scaffold(
      appBar: AppBar(title: Text('프로필')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text('사용자 ID: $userId'),
            Text('이름: $userName'),
            Text('이메일: $userEmail'),
          ],
        ),
      ),
    );
  }
}
```

### 2. Get.parameters 사용

```dart
// URL 파라미터로 이동
Get.toNamed('/user/123/profile');

// 라우트 정의
GetPage(
  name: '/user/:id/profile',
  page: () => UserProfilePage(),
),

// 파라미터 받기
class UserProfilePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final userId = Get.parameters['id'];

    return Scaffold(
      appBar: AppBar(title: Text('사용자 프로필')),
      body: Center(
        child: Text('사용자 ID: $userId'),
      ),
    );
  }
}
```

## 애니메이션 종류

```dart
// 다양한 애니메이션 옵션
Get.to(
  () => SecondPage(),
  transition: Transition.fadeIn,        // 페이드인
  // transition: Transition.rightToLeft,  // 오른쪽에서 왼쪽
  // transition: Transition.leftToRight,  // 왼쪽에서 오른쪽
  // transition: Transition.upToDown,     // 위에서 아래
  // transition: Transition.downToUp,     // 아래에서 위
  // transition: Transition.zoom,         // 줌
  // transition: Transition.size,         // 크기 변화
  // transition: Transition.cupertino,    // iOS 스타일
  // transition: Transition.native,       // 네이티브
  duration: Duration(milliseconds: 300),
);
```

## 실전 예제: 간단한 앱 네비게이션

```dart
class NavigationController extends GetxController {
  var currentIndex = 0.obs;

  void changePage(int index) {
    currentIndex.value = index;
  }
}

class MainApp extends StatelessWidget {
  final NavigationController controller = Get.put(NavigationController());

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Obx(() => IndexedStack(
        index: controller.currentIndex.value,
        children: [
          HomePage(),
          ProfilePage(),
          SettingsPage(),
        ],
      )),
      bottomNavigationBar: Obx(() => BottomNavigationBar(
        currentIndex: controller.currentIndex.value,
        onTap: controller.changePage,
        items: [
          BottomNavigationBarItem(
            icon: Icon(Icons.home),
            label: '홈',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.person),
            label: '프로필',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.settings),
            label: '설정',
          ),
        ],
      )),
    );
  }
}
```

## 중첩 라우팅 (Nested Routes)

```dart
class NestedApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return GetMaterialApp(
      initialRoute: '/dashboard',
      getPages: [
        GetPage(
          name: '/dashboard',
          page: () => DashboardPage(),
          children: [
            GetPage(
              name: '/home',
              page: () => HomePage(),
            ),
            GetPage(
              name: '/profile',
              page: () => ProfilePage(),
            ),
            GetPage(
              name: '/settings',
              page: () => SettingsPage(),
            ),
          ],
        ),
      ],
    );
  }
}

class DashboardPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('대시보드')),
      body: Navigator(
        key: Get.nestedKey(1), // 중첩 네비게이터 키
        initialRoute: '/dashboard/home',
        onGenerateRoute: (settings) {
          if (settings.name == '/dashboard/home') {
            return GetPageRoute(page: () => HomePage());
          } else if (settings.name == '/dashboard/profile') {
            return GetPageRoute(page: () => ProfilePage());
          } else if (settings.name == '/dashboard/settings') {
            return GetPageRoute(page: () => SettingsPage());
          }
          return null;
        },
      ),
      bottomNavigationBar: BottomNavigationBar(
        onTap: (index) {
          switch (index) {
            case 0:
              Get.toNamed('/dashboard/home');
              break;
            case 1:
              Get.toNamed('/dashboard/profile');
              break;
            case 2:
              Get.toNamed('/dashboard/settings');
              break;
          }
        },
        items: [
          BottomNavigationBarItem(icon: Icon(Icons.home), label: '홈'),
          BottomNavigationBarItem(icon: Icon(Icons.person), label: '프로필'),
          BottomNavigationBarItem(icon: Icon(Icons.settings), label: '설정'),
        ],
      ),
    );
  }
}
```

## 라우트 미들웨어 (Route Middleware)

```dart
class AuthMiddleware extends GetMiddleware {
  @override
  RouteSettings? redirect(String? route) {
    // 로그인 체크
    if (!isLoggedIn()) {
      return RouteSettings(name: '/login');
    }
    return null;
  }
}

// 라우트에 미들웨어 적용
GetPage(
  name: '/profile',
  page: () => ProfilePage(),
  middlewares: [AuthMiddleware()],
),
```

## 다음 단계

- [04*API_CRUD*기초.md](04_API_CRUD_기초.md) - API 연동 학습
- [05*실전*프로젝트.md](05_실전_프로젝트.md) - 완전한 앱 만들기
